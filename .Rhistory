caption = "Climatic variation and flood events at the study dikes"
)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", expression("m${^3}$ s${^−}$${^1}$"), Unit)) %>%
gt::gt(
caption = "Climatic variation and flood events at the study dikes"
)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "m^3 s${^−}$${^1}$", Unit)) %>%
gt::gt(
caption = "Climatic variation and flood events at the study dikes"
)
install.packages("flextable")
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "m^3 s${^−}$${^1}$", Unit)) %>%
flextable::flextable(
caption = "Climatic variation and flood events at the study dikes"
)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "m^3 s${^−}$${^1}$", Unit)) %>%
flextable::flextable()
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "mas_sup(3) s${^−}$${^1}$", Unit)) %>%
flextable::flextable()
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "m as_sup(3) s${^−}$${^1}$", Unit)) %>%
flextable::flextable()
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "as_paragraph(m as_sup(3)) s${^−}$${^1}$", Unit)) %>%
flextable::flextable()
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "m<sup>-3</sup> s${^−}$${^1}$", Unit)) %>%
flextable::flextable()
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
mutate(Unit = if_else(Unit == "m3 s−1", "m html(<sup>-3</sup>) s${^−}$${^1}$", Unit)) %>%
flextable::flextable()
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable()
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i = 1, j = 1, value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i = 1, j = 1, value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i == "9", j = 1, value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i == 1, j = Unit, value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i = 1, j = Unit, value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i = 1, j = "Unit", value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i = ~ Unit == "m3 s-1", j = "Unit", value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i = ~ Unit == "m3 s−1", j = "Unit", value = as_paragraph("10", as_sup("-3")))
library(flextable)
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable::flextable() %>%
compose(part = "body", i = ~ Unit == "m3 s−1", j = "Unit", value = as_paragraph("m", as_sup("3"), " s", as_sup("−1")))
read_csv(here::here("data", "raw", "data_raw_table_s1.csv")) %>%
flextable() %>%
bold(part = "header") %>%
compose(part = "body", i = ~ Unit == "m3 s−1", j = "Unit", value = as_paragraph("m", as_sup("3"), " s", as_sup("−1"))) %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
compose(part = "body", i = ~ Unit == "m3 s−1", j = "Unit", value = as_paragraph("m", as_sup("3"), " s", as_sup("−1"))) %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
ad_header_row(top = TRUE, values = c("", "", "#", "#", "%", "%"))
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(top = TRUE, values = c("", "", "#", "#", "%", "%"))
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(top = FALSE, values = c("", "", "#", "#", "%", "%"))
autofit()
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(values = c("", "", "#", "#", "%", "%"))
autofit()
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(values = c("", "", "#", "#", "%", "%")) %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_2.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(top = FALSE, values = c("", "", "#", "#", "%", "%")) %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row() %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(2) %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(x = 2) %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
add_header_row(x = 2) %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
list()
flextable() %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
list()
flextable() %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
add_header_row(
values = read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>% slice(2)
) %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
add_header_row(
top = FALSE,
values = read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>% slice(2)
) %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
flextable() %>%
add_header_row(
top = FALSE,
values = read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>% slice(1)
) %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
slice(-1) %>%
flextable() %>%
add_header_row(
top = FALSE,
values = read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>% slice(1)
) %>%
bold(part = "header") %>%
autofit()
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
slice(-1) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(
top = FALSE,
values = read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>% slice(1)
) %>%
autofit()
# Grassland experiment on dikes
# Establishment rates ####
# Markus Bauer
# 2022-12-15
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
# A Preparation ###############################################################
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
### Packages ###
library(here)
library(tidyverse)
library(gt)
### Start ###
rm(list = ls())
setwd(here("data", "processed"))
### Load data ###
data <- read_csv("data_processed_traits.csv",
col_names = TRUE, na = c("na", "NA"), col_types =
cols(
.default = "?",
name = "f"
)) %>%
select(name, family, total_seeded_2018, starts_with("rate_")) %>%
drop_na(total_seeded_2018) %>%
arrange(match(family, c("Poaceae", "Fabaceae"))) %>%
mutate(across(starts_with("rate"), ~ .x * 100),
name = str_replace_all(name, "_", " "))
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
# B Plot with gt ##############################################################
#++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
range(data$rate_2018, data$rate_2019, data$rate_2020, data$rate_2021)
mean(data$rate_2018); sd(data$rate_2018)
mean(data$rate_2019); sd(data$rate_2019)
mean(data$rate_2020); sd(data$rate_2020)
mean(data$rate_2021); sd(data$rate_2021)
(table <- data %>%
gt() %>%
opt_table_lines("none") %>% ### Set general options ###
tab_options(
table.font.style = "Arial",
table.font.size = px(11),
table.font.color = "black",
column_labels.font.weight = "bold",
data_row.padding = px(4),
table.align = "left",
column_labels.border.top.style = "solid",
table_body.border.top.style = "solid",
table_body.border.bottom.style = "solid",
column_labels.border.top.color = "black",
table_body.border.top.color = "black",
table_body.border.bottom.color = "black",
column_labels.border.top.width = px(2),
table_body.border.top.width = px(1),
table_body.border.bottom.width = px(2)
) %>%
tab_style(
locations = cells_column_labels(),
style = cell_borders(sides = "top", color = "black",
style = "solid", weight = px(1))
) %>%
tab_style(
locations = cells_column_labels(),
style = cell_text(align = "center")
) %>%
tab_style(
locations = cells_body(),
style = cell_text(align = "center")
) %>%
tab_style(
locations = cells_body(columns = "name"),
style = cell_text(align = "left", style = "italic")
) %>%
tab_spanner( ### Create spanner column ###
label = "Establishment rate [%]",
columns = starts_with("rate_")
) %>%
cols_label( ### Rename column names ###
name = md("Species name"),
family = md("Family"),
total_seeded_2018 = md("Seeded plots"),
rate_2018 = md("2018"),
rate_2019 = md("2019"),
rate_2020 = md("2020"),
rate_2021 = md("2021")
) %>%
tab_style( ### Highlight columns ###
locations = cells_body(
columns = rate_2018,
rows = rate_2018 > 0
),
style = list(
cell_fill(color = "grey95"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2019,
rows = rate_2019 > 0
),
style = list(
cell_fill(color = "grey95"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2020,
rows = rate_2020 > 0
),
style = list(
cell_fill(color = "grey95"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2021,
rows = rate_2021 > 0
),
style = list(
cell_fill(color = "grey95"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2018,
rows = rate_2018 > 33
),
style = list(
cell_fill(color = "grey80"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2019,
rows = rate_2019 > 33
),
style = list(
cell_fill(color = "grey80"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2020,
rows = rate_2020 > 33
),
style = list(
cell_fill(color = "grey80"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2021,
rows = rate_2021 > 33
),
style = list(
cell_fill(color = "grey80"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2018,
rows = rate_2018 > 50
),
style = list(
cell_fill(color = "grey63"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2019,
rows = rate_2019 > 50
),
style = list(
cell_fill(color = "grey63"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2020,
rows = rate_2020 > 50
),
style = list(
cell_fill(color = "grey63"),
cell_text(weight = "bold")
)
) %>%
tab_style(
locations = cells_body(
columns = rate_2021,
rows = rate_2021 > 50
),
style = list(
cell_fill(color = "grey63"),
cell_text(weight = "bold")
)
))
### Save ###
gtsave(table, here("outputs", "tables", "table_a2_establishment.csv"))
### Save ###
gtsave(table, here("outputs", "tables", "table_a2_establishment.html"))
knitr::include_graphics(here::here("outputs", "tables", "table_a2_establishment.html"))
View(data)
remotes::install_github("davidgohel/officedown")
renv::status()
install.packages(c("broom", "datawizard", "digest", "evaluate", "htmltools", "htmlwidgets", "httpuv", "maptools", "nleqslv", "nlme", "overlapping", "parallelly", "pkgdown", "rgdal", "rmarkdown", "roxygen2", "segmented", "shiny", "stringi", "terra", "testthat", "tinytex", "units", "wk"))
install.packages(c("boot", "cluster", "foreign", "MASS", "Matrix", "mgcv", "nlme", "nnet", "rpart", "survival"), lib="C:/Users/marku/AppData/Local/Temp/RtmpOYTn7X/renv-system-library")
renv::status()
renv::snapshot()
renv::status()
renv::snapshot()
install.packages("flextable")
read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>%
slice(-1) %>%
flextable() %>%
bold(part = "header") %>%
add_header_row(
top = FALSE,
values = read_csv(here::here("data", "raw", "data_raw_table_1.csv")) %>% slice(1)
) %>%
autofit()
knitr::opts_chunk$set(
echo = TRUE
)
sites <- read_csv(
here("data", "processed", "data_processed_sites_temporal.csv"),
col_names = TRUE, na = c("na", "NA", ""),
col_types = cols(
.default = "?",
plot = "f",
site = "f",
sand_ratio = "f",
substrate_depth = col_factor(levels = c("30", "15")),
target_type = col_factor(levels = c("hay_meadow", "dry_grassland")),
seed_density = "f",
exposition = col_factor(levels = c("north", "south")),
survey_year = "c"
)
) %>%
### Exclude data of seed mixtures
filter(presabu == "presence") %>%
mutate(
survey_year_fct = factor(survey_year),
botanist_year = str_c(survey_year, botanist, exposition, sep = " "),
botanist_year = factor(botanist_year),
id = factor(id),
n = persistence / 100
) %>%
select(
id, plot, site, exposition, sand_ratio, substrate_depth, target_type,
seed_density, survey_year_fct, survey_year, botanist_year, n
)
library(here)
library(tidyverse)
library(tidyverse)
library(ggbeeswarm)
library(patchwork)
library(brms)
library(DHARMa.helpers)
library(bayesplot)
library(loo)
library(tidybayes)
library(flextable)
library(bayesplot)
library(loo)
library(tidybayes)
library(flextable)
library(emmeans)
sites <- read_csv(
here("data", "processed", "data_processed_sites_temporal.csv"),
col_names = TRUE, na = c("na", "NA", ""),
col_types = cols(
.default = "?",
plot = "f",
site = "f",
sand_ratio = "f",
substrate_depth = col_factor(levels = c("30", "15")),
target_type = col_factor(levels = c("hay_meadow", "dry_grassland")),
seed_density = "f",
exposition = col_factor(levels = c("north", "south")),
survey_year = "c"
)
) %>%
### Exclude data of seed mixtures
filter(presabu == "presence") %>%
mutate(
survey_year_fct = factor(survey_year),
botanist_year = str_c(survey_year, botanist, exposition, sep = " "),
botanist_year = factor(botanist_year),
id = factor(id),
n = persistence / 100
) %>%
select(
id, plot, site, exposition, sand_ratio, substrate_depth, target_type,
seed_density, survey_year_fct, survey_year, botanist_year, n
)
sites %>%
kable()
sites %>%
knitr::kable()
sites %>%
slice(10) %>%
knitr::kable()
sites %>%
slice(3) %>%
knitr::kable()
sites %>%
slice(3) %>%
kableExtra::kbl()
sites %>%
slice(3) %>%
kableExtra::kbl() %>%
kableExtra::kable_classic()
sites %>%
kableExtra::kable_classic()
