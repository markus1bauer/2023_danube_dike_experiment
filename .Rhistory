id = "f",
plot = "f",
block = "f",
exposition = col_factor(levels = c("north", "south")),
sandRatio = "f",
substrateDepth = "f",
targetType = "f",
seedDensity = "f"
)) %>%
filter(
!str_detect(id, "C") & presabu == "presence" & surveyYear != "seeded"
) %>%
mutate(
n = distance_hay,
surveyYear_fac = factor(surveyYear),
botanist_year = str_c(botanist, surveyYear, sep = " "),
botanist_year = factor(botanist_year)
) %>%
select(
id, plot, block, botanist_year, exposition, sandRatio, substrateDepth, targetType,
seedDensity, surveyYear_fac, n
)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year) + (1 | exposition),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 3)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
iter = 500#10000
chains = 3#4
thin = 2
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
renv::status()
install.packages("EMLassemblyline")
renv::snapshot()
renv::status()
renv::snapshot()
renv::status()
remotes::install_github("EDIorg/EMLassemblyline")
remotes::install_github("ropenscilabs/emldown", build = FALSE)
install.packages("remotes")
remotes::install_github("ropenscilabs/emldown", build = FALSE)
remotes::install_github("EDIorg/EMLassemblyline")
renv::status()
renv::snapshot()
renv::status()
### Packages ###
library(here)
library(tidyverse)
library(ggbeeswarm)
library(brms)
library(DHARMa)
library(bayesplot)
library(loo)
library(tidybayes)
library(emmeans)
### Start ###
#rm(list = ls())
setwd(here("data", "processed"))
### Load data ###
sites <- read_csv("data_processed_sites.csv",
col_names = TRUE,
na = c("na", "NA", ""), col_types =
cols(
.default = "?",
id = "f",
plot = "f",
block = "f",
exposition = col_factor(levels = c("north", "south")),
sandRatio = "f",
substrateDepth = "f",
targetType = "f",
seedDensity = "f"
)) %>%
filter(
!str_detect(id, "C") & presabu == "presence" & surveyYear != "seeded"
) %>%
mutate(
n = distance_hay,
surveyYear_fac = factor(surveyYear),
botanist_year = str_c(botanist, surveyYear, sep = " "),
botanist_year = factor(botanist_year)
) %>%
select(
id, plot, block, botanist_year, exposition, sandRatio, substrateDepth, targetType,
seedDensity, surveyYear_fac, n
)
iter = 500#10000
chains = 3#4
thin = 2
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
m4 <- lmerTest::lmer(n ~ (targetType + sandRatio + exposition +
surveyYear_fac)^2 +
seedDensity + substrateDepth +
seedDensity:targetType +
substrateDepth:sandRatio +
seedDensity:targetType:exposition +
substrateDepth:sandRatio:exposition +
sandRatio:surveyYear_fac:exposition +
sandRatio:exposition:targetType +
surveyYear_fac:exposition:targetType +
(1 | block/plot) + (1 | botanist_year),
data = sites,
REML = FALSE);lme4::isSingular(m4);simulateResiduals(m4, plot = TRUE);car::Anova(m4, type = 2)
ggplot(sites %>% filter(surveyYear == 2021), aes(x = sandRatio, y = n)) +
geom_boxplot() + geom_quasirandom() +
facet_wrap(~ exposition)
### Load data ###
sites <- read_csv("data_processed_sites.csv",
col_names = TRUE,
na = c("na", "NA", ""), col_types =
cols(
.default = "?",
id = "f",
plot = "f",
block = "f",
exposition = col_factor(levels = c("north", "south")),
sandRatio = "f",
substrateDepth = "f",
targetType = "f",
seedDensity = "f"
)) %>%
filter(
!str_detect(id, "C") & presabu == "presence" & surveyYear != "seeded"
) %>%
mutate(
n = distance_hay,
surveyYear_fac = factor(surveyYear),
botanist_year = str_c(botanist, surveyYear, sep = " "),
botanist_year = factor(botanist_year)
) %>%
select(
id, plot, block, botanist_year, exposition, sandRatio, substrateDepth,
targetType, seedDensity, surveyYear, surveyYear_fac, n
)
### a Graphs -----------------------------------------------------------------
#simple effects:
ggplot(sites %>% filter(surveyYear == 2021), aes(y = n, x = exposition)) +
geom_boxplot() + geom_quasirandom()
ggplot(sites %>% filter(surveyYear == 2021),
aes(x = substrateDepth, y = n, color = sandRatio)) +
geom_quasirandom(alpha = 0.5, dodge.width = 0.8) +
geom_boxplot(fill = "transparent") +
facet_wrap(~ exposition)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
install.packages("rstan")
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
### Packages ###
library(here)
library(tidyverse)
library(ggbeeswarm)
library(brms)
library(DHARMa)
library(bayesplot)
library(loo)
library(tidybayes)
library(emmeans)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
### Start ###
#rm(list = ls())
setwd(here("data", "processed"))
### Load data ###
sites <- read_csv("data_processed_sites.csv",
col_names = TRUE,
na = c("na", "NA", ""), col_types =
cols(
.default = "?",
id = "f",
plot = "f",
block = "f",
exposition = col_factor(levels = c("north", "south")),
sandRatio = "f",
substrateDepth = "f",
targetType = "f",
seedDensity = "f"
)) %>%
filter(
!str_detect(id, "C") & presabu == "presence" & surveyYear != "seeded"
) %>%
mutate(
n = distance_hay,
surveyYear_fac = factor(surveyYear),
botanist_year = str_c(botanist, surveyYear, sep = " "),
botanist_year = factor(botanist_year)
) %>%
select(
id, plot, block, botanist_year, exposition, sandRatio, substrateDepth,
targetType, seedDensity, surveyYear, surveyYear_fac, n
)
### Packages ###
library(here)
library(tidyverse)
library(ggbeeswarm)
library(brms)
library(DHARMa)
library(bayesplot)
library(loo)
library(tidybayes)
library(emmeans)
### Start ###
#rm(list = ls())
setwd(here("data", "processed"))
### Load data ###
sites <- read_csv("data_processed_sites.csv",
col_names = TRUE,
na = c("na", "NA", ""), col_types =
cols(
.default = "?",
id = "f",
plot = "f",
block = "f",
exposition = col_factor(levels = c("north", "south")),
sandRatio = "f",
substrateDepth = "f",
targetType = "f",
seedDensity = "f"
)) %>%
filter(
!str_detect(id, "C") & presabu == "presence" & surveyYear != "seeded"
) %>%
mutate(
n = distance_hay,
surveyYear_fac = factor(surveyYear),
botanist_year = str_c(botanist, surveyYear, sep = " "),
botanist_year = factor(botanist_year)
) %>%
select(
id, plot, block, botanist_year, exposition, sandRatio, substrateDepth,
targetType, seedDensity, surveyYear, surveyYear_fac, n
)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
### Packages ###
library(here)
library(tidyverse)
library(ggbeeswarm)
library(brms, quietly = TRUE)
library(DHARMa)
library(bayesplot)
library(loo)
library(tidybayes)
library(emmeans)
### Start ###
#rm(list = ls())
setwd(here("data", "processed"))
### Load data ###
sites <- read_csv("data_processed_sites.csv",
col_names = TRUE,
na = c("na", "NA", ""), col_types =
cols(
.default = "?",
id = "f",
plot = "f",
block = "f",
exposition = col_factor(levels = c("north", "south")),
sandRatio = "f",
substrateDepth = "f",
targetType = "f",
seedDensity = "f"
)) %>%
filter(
!str_detect(id, "C") & presabu == "presence" & surveyYear != "seeded"
) %>%
mutate(
n = distance_hay,
surveyYear_fac = factor(surveyYear),
botanist_year = str_c(botanist, surveyYear, sep = " "),
botanist_year = factor(botanist_year)
) %>%
select(
id, plot, block, botanist_year, exposition, sandRatio, substrateDepth,
targetType, seedDensity, surveyYear, surveyYear_fac, n
)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
library(rstan)
parallel::detectCores()
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123,
CXX14=$(BINPREF)g++ -O2 -march=native -mtune=native)
### Packages ###
library(here)
library(tidyverse)
library(ggbeeswarm)
library(brms)
library(DHARMa)
library(bayesplot)
library(loo)
library(tidybayes)
library(emmeans)
### Start ###
#rm(list = ls())
setwd(here("data", "processed"))
### Load data ###
sites <- read_csv("data_processed_sites.csv",
col_names = TRUE,
na = c("na", "NA", ""), col_types =
cols(
.default = "?",
id = "f",
plot = "f",
block = "f",
exposition = col_factor(levels = c("north", "south")),
sandRatio = "f",
substrateDepth = "f",
targetType = "f",
seedDensity = "f"
)) %>%
filter(
!str_detect(id, "C") & presabu == "presence" & surveyYear != "seeded"
) %>%
mutate(
n = distance_hay,
surveyYear_fac = factor(surveyYear),
botanist_year = str_c(botanist, surveyYear, sep = " "),
botanist_year = factor(botanist_year)
) %>%
select(
id, plot, block, botanist_year, exposition, sandRatio, substrateDepth,
targetType, seedDensity, surveyYear, surveyYear_fac, n
)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
m_simple <- brm(n ~ targetType + exposition + sandRatio + surveyYear_fac +
seedDensity + substrateDepth +
(1 | block/plot) + (1 | botanist_year),
data = sites,
family = gaussian("identity"),
prior = c(
set_prior("normal(0, 2)", class = "b"),
set_prior("cauchy(0, 1)", class = "sigma")
),
chains = chains,
iter = iter,
thin = thin,
warmup = floor(iter / 2),
save_pars = save_pars(all = TRUE),
cores = parallel::detectCores(),
seed = 123)
