select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "n", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "n") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "seededCov",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, n), ~ . > 0)) %>%
mutate(seededRichness = if_else(seeded > 0 & seededCov > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(seededRichness, seededCov), ~ sum(., na.rm = T)))
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "n", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "n") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "seededCov",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, n), ~ . > 0)) %>%
mutate(seededRichness = if_else(seeded > 0 & seededCov > 0, 1, 0)) #%>%
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(seededRichness = if_else(seeded > 0 & value > 0, 1, 0)) #%>%
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(seededRichness = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(seededRichness, seededCov), ~ sum(., na.rm = T)))
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(seededRichness = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(seededRichness, seededCov), ~ sum(., na.rm = T)))
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T)))
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value)
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(c(plot, surveyYear), sep = "_")
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(c("plot", "surveyYear"), sep = "_")
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(plot, surveyYear, sep = "_")
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_")
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_")
sites2 <- right_join(sites, data, by = "id")
sites2 <- full_join(sites, data, by = "id")
View(sites2)
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(id = !str_detect("x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(id = !str_contains("x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(id == !str_contains("x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(id == !str_detect("x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(id == !str_detect(id, "x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(id == str_detect(id, "x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(id != str_detect(id, "x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(!str_detect(id, "x0809"))
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0),
value = if_else(success = 1, value, 0)) #%>%
### Calculate seeded species richness ###
data2 <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0),
value = if_else(success == 1, value, 0)) #%>%
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0),
value = if_else(success == 1, value, 0)) #%>%
### Calculate seeded species richness ###
data <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
#filter(across(c(seeded, value), ~ . > 0)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0),
value = if_else(success == 1, value, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(across(c(success, value), ~ sum(., na.rm = T))) %>%
rename(seededRichness = success,
seededCov = value) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(!str_detect(id, "x0809"))
sites2 <- full_join(sites, data, by = "id")
sites2 <- full_join(sites, data, by = "id")
### * Seeded species' coverage ####
cover_seeded <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(sum(success)) %>%
rename(seededRichness = success) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(!str_detect(id, "x0809"))
### * Seeded species' coverage ####
cover_seeded <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(sum(success)) #%>%
View(cover_seeded)
### * Seeded species' coverage ####
cover_seeded <- species %>%
select(-starts_with("C")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
mutate(success = if_else(seeded > 0 & value > 0, 1, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(seededRichness = sum(success)) %>%
unite(id, plot, surveyYear, sep = "_") %>%
filter(!str_detect(id, "x0809"))
### * Seeded species' coverage ####
cover_seeded <- species %>%
select(-starts_with("C"), -contains("x0809")) #%>%
### * Seeded species' coverage ####
cover_seeded <- species %>%
select(-starts_with("C")) #%>%
### * Seeded species' coverage ####
cover_seeded <- species %>%
select(-starts_with("C"), -contains("x0809")) #%>%
### * seeded species (species richness) ####
speciesRichness_seeded <- species %>%
select(-starts_with("C"), -contains("x0809")) %>%
pivot_longer(-name, names_to = "id", values_to = "value", values_drop_na = T) %>%
separate(id, c("plot", "surveyYear"), sep = "_(?!.*_)",
remove = F, extra = "merge", fill = "warn", convert = F) %>%
pivot_wider(names_from = "surveyYear", values_from = "value") %>%
group_by(plot, name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
ungroup() %>%
pivot_longer(starts_with("20"), names_to = "surveyYear", values_to = "value",
names_transform = list(surveyYear = as.factor)) %>%
mutate(successCov = if_else(seeded > 0 & value > 0, value, 0)) %>%
group_by(plot, surveyYear) %>%
summarise(seededCov = sum(successCov)) %>%
ungroup() %>%
unite(id, plot, surveyYear, sep = "_")
View(speciesRichness_seeded)
