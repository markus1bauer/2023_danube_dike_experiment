### Rename species ###
mutate(name = fct_recode(name, Carex_praecox_ssp_praecox = "Carex_praecox")) %>%
mutate(name = fct_recode(name, Cerastium_fontanum_ssp_vulgare = "Cerastium_fontanum")) %>%
mutate(name = fct_recode(name, Cerastium_fontanum_ssp_vulgare = "Cerastium_holosteoides")) %>%
mutate(name = fct_recode(name, Cornus_controversa = "Cornus_sanguinea")) %>%
mutate(name = fct_recode(name, Cota_tinctoria = "Anthemis_tinctoris")) %>%
mutate(name = fct_recode(name, Erigeron_canadensis = "Conyza_canadensis")) %>%
mutate(name = fct_recode(name, Fallopia_convolvulus = "Polygonum_convolvulus")) %>%
mutate(name = fct_recode(name, Galium_mollugo = "Galium_album")) %>%
mutate(name = fct_recode(name, Jacobaea_vulgaris = "Senecio_jacobaea")) %>%
mutate(name = fct_recode(name, Persicaria_amphibia = "Polygonum_amphibium")) %>%
mutate(name = fct_recode(name, Persicaria_bistorta = "Bistorta_officinalis")) %>%
mutate(name = fct_recode(name, Persicaria_minor = "Polygonum_minus")) %>%
mutate(name = fct_recode(name, Populus_alba = "Popolus_alba")) %>%
mutate(name = fct_recode(name, Silene_latifolia_ssp_alba = "Silene_latifolia")) %>%
mutate(name = fct_recode(name, Silene_latifolia_ssp_alba = "Silene_alba")) %>%
mutate(name = fct_recode(name, "Silene_flos-cuculi" = "Lychnis_flos-cuculi")) %>%
mutate(name = fct_recode(name, Taraxacum_campylodes = "Taraxacum_officinale")) %>%
mutate(name = fct_recode(name, Vicia_sativa_ssp_nigra = "Vicia_angustifolia")) %>%
### combine created duplicates ###
group_by(name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
### Implement counted inidviduals as 0.5 % in normal columns ###
mutate(across(where(is.numeric) & contains("i"), ~ 0.5 * (. > 0))) %>%
pivot_longer(cols = -name, names_to = "id", values_to = "n") %>%
mutate(id  =  str_replace(id, "i", "")) %>%
group_by(name, id) %>%
summarise(max = max(n, na.rm = T)) %>%
mutate(max = ifelse(is.infinite(max), NA, max)) %>%
pivot_wider(names_from = "id", values_from = "max") %>%
mutate(name = as_factor(name)) %>%
### Rename plots ###
rename_with(~ str_replace(.x, "_1_201", "_01_201")) %>%
rename_with(~ str_replace(.x, "_1_2020", "_01_2020")) %>%
rename_with(~ str_replace(.x, "_2_201", "_02_201")) %>%
rename_with(~ str_replace(.x, "_2_2020", "_02_2020")) %>%
rename_with(~ str_replace(.x, "_3_201", "_03_201")) %>%
rename_with(~ str_replace(.x, "_3_2020", "_03_2020")) %>%
rename_with(~ str_replace(.x, "_4_201", "_04_201")) %>%
rename_with(~ str_replace(.x, "_4_2020", "_04_2020")) %>%
rename_with(~ str_replace(.x, "_5_201", "_05_201")) %>%
rename_with(~ str_replace(.x, "_5_2020", "_05_2020")) %>%
rename_with(~ str_replace(.x, "_6_201", "_06_201")) %>%
rename_with(~ str_replace(.x, "_6_2020", "_06_2020")) %>%
rename_with(~ str_replace(.x, "_7_201", "_07_201")) %>%
rename_with(~ str_replace(.x, "_7_2020", "_07_2020")) %>%
rename_with(~ str_replace(.x, "_8_201", "_08_201")) %>%
rename_with(~ str_replace(.x, "_8_2020", "_08_2020")) %>%
rename_with(~ str_replace(.x, "_9_201", "_09_201")) %>%
rename_with(~ str_replace(.x, "_9_2020", "_09_2020")) %>%
### Check that each species occurs at least one time ###
group_by(name) %>%
mutate(total = sum(c_across(starts_with("L") | starts_with("W")), na.rm = T)) %>%
mutate(presence = if_else(total > 0, 1, 0)) %>%
filter(presence == 1) %>%
ungroup() %>%
select(-total, -presence) %>%
mutate(name = as.character(name)) %>%
arrange(name) %>%
mutate(name = as_factor(name)) %>%
### Check that each plot has at least one species ###
pivot_longer(-name, names_to = "id", values_to = "value") %>%
group_by(id) %>%
mutate(sum = sum(value, na.rm = T)) %>%
filter(sum > 0) %>%
select(-sum) %>%
pivot_wider(names_from = id, values_from = value)
rm(list = setdiff(ls(), c("species")))
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
filter(n == 1)
table(data$n)
View(species)
View(data)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n")
table(data$n)
data <- species %>%
ungroup() %>%
pivot_longer(-name, names_to = "id", values_to = "n") #%>%
table(data$n)
data <- species %>%
ungroup() %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
filter(n == 1.69992916961793 |
n == 1.7 |
n == 3.29986250572893 |
n == 4.99979167534686 |
n == 8.5996416815966 |
n == 8.60380817465939)
View(data)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
select(!ends_with(_seeded))
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
select(!ends_with("_seeded"))
table(data$n)
View(data)
data <- species %>%
select(!ends_with("_seeded")) %>%
pivot_longer(-name, names_to = "id", values_to = "n") #%>%
View(data)
table(data$n)
View(data)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(str_detect(id, "_seeded$"), 100))
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(str_detect(id, "_seeded$"), 100, 0))
View(data)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") , 100, 0))
View(data)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") & n = 6 , 10, n))
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") & n = 6, 10, n))
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") & n == 6, 10, n))
View(data)
table(data$n)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") & n == 6, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 7, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 8, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 12, 10, n))
table(data$n)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") & n == 6, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 7, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 8, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 12, 10, n)) %>%
filter(n == 15)
View(data)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") & n == 6, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 7, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 8, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 12, 10, n)) %>%
filter(n == 25)
View(data)
data <- species %>%
pivot_longer(-name, names_to = "id", values_to = "n") %>%
mutate(n = if_else(!str_detect(id, "_seeded$") & n == 6, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 7, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 8, 10, n),
n = if_else(!str_detect(id, "_seeded$") & n == 12, 10, n))
table(data$n)
# Prepare vegetation data for Danube experiment ####
# Markus Bauer
### Packages ###
library(here)
library(tidyverse)
### Start ###
#installr::updateR(browse_news = F, install_R = T, copy_packages = T, copy_Rprofile.site = T, keep_old_packages = T, update_packages = T, start_new_R = F, quit_R = T, print_R_versions = T, GUI = F)
rm(list = ls())
setwd(here("data/raw"))
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
# A Load data ##############################################################################
#+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
### 1 Species #####################################################################################
### a Load species tables of all years -------------------------------------------------------------------------------------------
speciesLseeded <- read_csv2("data_raw_species_seeded_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
side = col_factor(),
id = col_factor()
)) %>%
mutate(id = str_c(side, id, sep = "_")) %>%
mutate(id = paste0(id, "_seeded")) %>%
pivot_longer(-c(id, side), names_to = "name", values_to = "n") %>%
mutate(name = str_replace(name, " ", "_")) %>%
group_by(id) %>%
mutate(sum = sum(n, na.rm = T)) %>%
mutate(abu = n / sum * 100) %>%
pivot_wider(names_from = "id", values_from = "abu") %>%
group_by(name) %>%
summarise(across(where(is.numeric), ~sum(.x, na.rm = T))) %>%
select(-n, -sum)
speciesWseeded <- read_csv2("data_raw_species_seeded_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
side = col_factor(),
id = col_factor()
)) %>%
mutate(id = str_c(side, id, sep = "_")) %>%
mutate(id = paste0(id, "_seeded")) %>%
pivot_longer(-c(side, id), names_to = "name", values_to = "n") %>%
mutate(name = str_replace(name, " ", "_")) %>%
group_by(id) %>%
mutate(sum = sum(n, na.rm = T)) %>%
mutate(abu = n / sum * 100) %>%
pivot_wider(names_from = "id", values_from = "abu") %>%
group_by(name) %>%
summarise(across(where(is.numeric), ~sum(.x, na.rm = T))) %>%
select(-n, -sum)
speciesL18 <- read_csv2("data_raw_species_2018_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("L_", .x), -name) %>%
rename_with(~ paste0(.x, "_2018"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor)
speciesW18 <- read_csv2("data_raw_species_2018_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("W_", .x), -name) %>%
rename_with(~ paste0(.x, "_2018"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor) %>%
mutate(name = fct_recode(name, Plantago_major_ssp_intermedia = "Plantago_major"))
speciesL19 <- read_csv2("data_raw_species_2019_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("L_", .x), -name) %>%
rename_with(~ paste0(.x, "_2019"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor) %>%
mutate(name = fct_recode(name, Plantago_major_ssp_major = "Plantago_major"))
speciesW19 <- read_csv2("data_raw_species_2019_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("W_", .x), -name) %>%
rename_with(~ paste0(.x, "_2019"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor) %>%
mutate(name = fct_recode(name, Plantago_major_ssp_major = "Plantago_major"))
speciesL20 <- read_csv("data_raw_species_2020_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("L_", .x), -name) %>%
rename_with(~ paste0(.x, "_2020"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor)
speciesW20 <- read_csv2("data_raw_species_2020_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("W_", .x), -name) %>%
rename_with(~ paste0(.x, "_2020"), -name) %>%
mutate(name = str_replace(name, "Plantago_major ssp. major", "Plantago_major_ssp_major")) %>%
mutate(name = str_replace(name, "Plantago_major ssp. intermedia", "Plantago_major_ssp_intermedia")) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor)
species21onwards <- read_csv("data_raw_species_2021_onwards.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
))
### b Join species tables -------------------------------------------------------------------------------------------
speciesL <- speciesLseeded %>%
full_join(speciesL18, by = "name") %>%
full_join(speciesL19, by = "name") %>%
full_join(speciesL20, by = "name")
speciesW <- speciesWseeded %>%
full_join(speciesW18, by = "name") %>%
full_join(speciesW19, by = "name") %>%
full_join(speciesW20, by = "name")
species <- speciesL %>%
full_join(speciesW) %>%
full_join(species21onwards) %>%
### Rename species ###
mutate(name = fct_recode(name, Carex_praecox_ssp_praecox = "Carex_praecox")) %>%
mutate(name = fct_recode(name, Cerastium_fontanum_ssp_vulgare = "Cerastium_fontanum")) %>%
mutate(name = fct_recode(name, Cerastium_fontanum_ssp_vulgare = "Cerastium_holosteoides")) %>%
mutate(name = fct_recode(name, Cornus_controversa = "Cornus_sanguinea")) %>%
mutate(name = fct_recode(name, Cota_tinctoria = "Anthemis_tinctoris")) %>%
mutate(name = fct_recode(name, Erigeron_canadensis = "Conyza_canadensis")) %>%
mutate(name = fct_recode(name, Fallopia_convolvulus = "Polygonum_convolvulus")) %>%
mutate(name = fct_recode(name, Galium_mollugo = "Galium_album")) %>%
mutate(name = fct_recode(name, Jacobaea_vulgaris = "Senecio_jacobaea")) %>%
mutate(name = fct_recode(name, Persicaria_amphibia = "Polygonum_amphibium")) %>%
mutate(name = fct_recode(name, Persicaria_bistorta = "Bistorta_officinalis")) %>%
mutate(name = fct_recode(name, Persicaria_minor = "Polygonum_minus")) %>%
mutate(name = fct_recode(name, Populus_alba = "Popolus_alba")) %>%
mutate(name = fct_recode(name, Silene_latifolia_ssp_alba = "Silene_latifolia")) %>%
mutate(name = fct_recode(name, Silene_latifolia_ssp_alba = "Silene_alba")) %>%
mutate(name = fct_recode(name, "Silene_flos-cuculi" = "Lychnis_flos-cuculi")) %>%
mutate(name = fct_recode(name, Taraxacum_campylodes = "Taraxacum_officinale")) %>%
mutate(name = fct_recode(name, Vicia_sativa_ssp_nigra = "Vicia_angustifolia")) %>%
### combine created duplicates ###
group_by(name) %>%
summarise(across(where(is.double), ~sum(.x, na.rm = T))) %>%
### Implement counted inidviduals as 0.5 % in normal columns ###
mutate(across(where(is.numeric) & contains("i"), ~ 0.5 * (. > 0))) %>%
pivot_longer(cols = -name, names_to = "id", values_to = "n") %>%
mutate(id  =  str_replace(id, "i", "")) %>%
group_by(name, id) %>%
summarise(max = max(n, na.rm = T)) %>%
mutate(max = ifelse(is.infinite(max), NA, max)) %>%
pivot_wider(names_from = "id", values_from = "max") %>%
mutate(name = as_factor(name)) %>%
### Rename plots ###
rename_with(~ str_replace(.x, "_1_201", "_01_201")) %>%
rename_with(~ str_replace(.x, "_1_2020", "_01_2020")) %>%
rename_with(~ str_replace(.x, "_2_201", "_02_201")) %>%
rename_with(~ str_replace(.x, "_2_2020", "_02_2020")) %>%
rename_with(~ str_replace(.x, "_3_201", "_03_201")) %>%
rename_with(~ str_replace(.x, "_3_2020", "_03_2020")) %>%
rename_with(~ str_replace(.x, "_4_201", "_04_201")) %>%
rename_with(~ str_replace(.x, "_4_2020", "_04_2020")) %>%
rename_with(~ str_replace(.x, "_5_201", "_05_201")) %>%
rename_with(~ str_replace(.x, "_5_2020", "_05_2020")) %>%
rename_with(~ str_replace(.x, "_6_201", "_06_201")) %>%
rename_with(~ str_replace(.x, "_6_2020", "_06_2020")) %>%
rename_with(~ str_replace(.x, "_7_201", "_07_201")) %>%
rename_with(~ str_replace(.x, "_7_2020", "_07_2020")) %>%
rename_with(~ str_replace(.x, "_8_201", "_08_201")) %>%
rename_with(~ str_replace(.x, "_8_2020", "_08_2020")) %>%
rename_with(~ str_replace(.x, "_9_201", "_09_201")) %>%
rename_with(~ str_replace(.x, "_9_2020", "_09_2020")) %>%
write_csv(here("data/raw/data_raw_species.csv"))
### Start ###
#installr::updateR(browse_news = F, install_R = T, copy_packages = T, copy_Rprofile.site = T, keep_old_packages = T, update_packages = T, start_new_R = F, quit_R = T, print_R_versions = T, GUI = F)
rm(list = ls())
setwd(here("data/raw"))
species <- read_csv("data_raw_species.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = "d",
name = "f"
)) %>%
### Check that each species occurs at least one time ###
group_by(name) %>%
mutate(total = sum(c_across(starts_with("L") | starts_with("W")), na.rm = T)) %>%
mutate(presence = if_else(total > 0, 1, 0)) %>%
filter(presence == 1) %>%
ungroup() %>%
select(-total, -presence) %>%
mutate(name = as.character(name)) %>%
arrange(name) %>%
mutate(name = as_factor(name)) %>%
### Check that each plot has at least one species ###
pivot_longer(-name, names_to = "id", values_to = "value") %>%
group_by(id) %>%
mutate(sum = sum(value, na.rm = T)) %>%
filter(sum > 0) %>%
select(-sum) %>%
### Adapt species cover to Londo scale ###
mutate(value = if_else(!str_detect(id, "_seeded$") & value == 6, 10, value),
value = if_else(!str_detect(id, "_seeded$") & value == 7, 10, value),
value = if_else(!str_detect(id, "_seeded$") & value == 8, 10, value),
value = if_else(!str_detect(id, "_seeded$") & value == 12, 10, value))
species <- read_csv("data_raw_species.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = "d",
name = "f"
)) %>%
### Check that each species occurs at least one time ###
group_by(name) %>%
mutate(total = sum(c_across(starts_with("L") | starts_with("W")), na.rm = T)) %>%
mutate(presence = if_else(total > 0, 1, 0)) %>%
filter(presence == 1) %>%
ungroup() %>%
select(-total, -presence) %>%
mutate(name = as.character(name)) %>%
arrange(name) %>%
mutate(name = as_factor(name)) %>%
### Check that each plot has at least one species ###
pivot_longer(-name, names_to = "id", values_to = "value") %>%
group_by(id) %>%
mutate(sum = sum(value, na.rm = T)) %>%
filter(sum > 0) %>%
select(-sum) %>%
### Adapt species cover to Londo scale ###
mutate(value = if_else(!str_detect(id, "_seeded$") & value == 6, 10, value),
value = if_else(!str_detect(id, "_seeded$") & value == 7, 10, value),
value = if_else(!str_detect(id, "_seeded$") & value == 8, 10, value),
value = if_else(!str_detect(id, "_seeded$") & value == 12, 10, value)) %>%
pivot_wider(names_from = id, values_from = value)
### a Load species tables of all years -------------------------------------------------------------------------------------------
speciesLseeded <- read_csv2("data_raw_species_seeded_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
side = col_factor(),
id = col_factor()
)) %>%
mutate(id = str_c(side, id, sep = "_")) %>%
mutate(id = paste0(id, "_seeded")) %>%
pivot_longer(-c(id, side), names_to = "name", values_to = "n") %>%
mutate(name = str_replace(name, " ", "_")) %>%
group_by(id) %>%
mutate(sum = sum(n, na.rm = T)) %>%
mutate(abu = n / sum * 100) %>%
pivot_wider(names_from = "id", values_from = "abu") %>%
group_by(name) %>%
summarise(across(where(is.numeric), ~sum(.x, na.rm = T))) %>%
select(-n, -sum)
speciesWseeded <- read_csv2("data_raw_species_seeded_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
side = col_factor(),
id = col_factor()
)) %>%
mutate(id = str_c(side, id, sep = "_")) %>%
mutate(id = paste0(id, "_seeded")) %>%
pivot_longer(-c(side, id), names_to = "name", values_to = "n") %>%
mutate(name = str_replace(name, " ", "_")) %>%
group_by(id) %>%
mutate(sum = sum(n, na.rm = T)) %>%
mutate(abu = n / sum * 100) %>%
pivot_wider(names_from = "id", values_from = "abu") %>%
group_by(name) %>%
summarise(across(where(is.numeric), ~sum(.x, na.rm = T))) %>%
select(-n, -sum)
speciesL18 <- read_csv2("data_raw_species_2018_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("L_", .x), -name) %>%
rename_with(~ paste0(.x, "_2018"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor)
speciesW18 <- read_csv2("data_raw_species_2018_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("W_", .x), -name) %>%
rename_with(~ paste0(.x, "_2018"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor) %>%
mutate(name = fct_recode(name, Plantago_major_ssp_intermedia = "Plantago_major"))
speciesL19 <- read_csv2("data_raw_species_2019_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("L_", .x), -name) %>%
rename_with(~ paste0(.x, "_2019"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor) %>%
mutate(name = fct_recode(name, Plantago_major_ssp_major = "Plantago_major"))
speciesW19 <- read_csv2("data_raw_species_2019_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("W_", .x), -name) %>%
rename_with(~ paste0(.x, "_2019"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor) %>%
mutate(name = fct_recode(name, Plantago_major_ssp_major = "Plantago_major"))
speciesL20 <- read_csv("data_raw_species_2020_land.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("L_", .x), -name) %>%
rename_with(~ paste0(.x, "_2020"), -name) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor)
speciesW20 <- read_csv2("data_raw_species_2020_water.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
)) %>%
mutate(name = str_replace(name, " ", "_")) %>%
rename_with( ~ paste0("W_", .x), -name) %>%
rename_with(~ paste0(.x, "_2020"), -name) %>%
mutate(name = str_replace(name, "Plantago_major ssp. major", "Plantago_major_ssp_major")) %>%
mutate(name = str_replace(name, "Plantago_major ssp. intermedia", "Plantago_major_ssp_intermedia")) %>%
separate(name, c("name", "descriptor"), " ", extra = "drop", fill = "right") %>%
mutate(name = as_factor(str_replace(name, "\\.", ""))) %>%
select(-descriptor)
species21onwards <- read_csv("data_raw_species_2021_onwards.csv", col_names = T, na = c("", "NA", "na"), col_types =
cols(
.default = col_double(),
name = col_factor()
))
